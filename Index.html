<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>My Personal Planner • Dec 2025 – Jan 2027</title>
  <script src="https://cdn.jsdelivr.net/npm/luxon@3.4.4/build/global/luxon.min.js"></script>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Playfair+Display:wght@700&family=Quicksand:wght@400;600&family=Caveat:wght@600&display=swap');

    body {
      font-family: 'Quicksand', sans-serif;
      background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
      margin: 0; padding: 20px; color: #333;
      min-height: 100vh;
    }
    h1 {
      font-family: 'Playfair Display', serif;
      text-align: center;
      font-size: 3.5rem;
      color: #2c3e50;
      margin-bottom: 10px;
      text-shadow: 2px 2px 8px rgba(0,0,0,0.1);
    }
    .subtitle { text-align: center; font-size: 1.3rem; color: #555; margin-bottom: 30px; }

    .container { max-width: 1300px; margin: 0 auto; }

    /* Month Navigation & Calendars */
    .month-nav {
      display: flex; justify-content: space-between; align-items: center;
      margin: 30px 0; background: white; padding: 15px 30px;
      border-radius: 15px; box-shadow: 0 10px 30px rgba(0,0,0,0.1);
    }
    .month-nav button {
      background: #3498db; color: white; border: none; padding: 12px 20px;
      border-radius: 50px; cursor: pointer; font-weight: 600;
    }
    .month-nav button:hover { background: #2980b9; }
    .month-title { font-family: 'Caveat', cursive; font-size: 2.8rem; color: #e74c3c; }

    .calendars {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(420px, 1fr));
      gap: 20px;
      margin-bottom: 40px;
    }
    .mini-calendar {
      background: white; border-radius: 15px; padding: 20px;
      box-shadow: 0 10px 30px rgba(0,0,0,0.1);
    }
    .mini-calendar h2 {
      font-family: 'Playfair Display', serif;
      text-align: center; margin: 0 0 15px; color: #2c3e50;
    }
    table {
      width: 100%; border-collapse: collapse; font-size: 0.95rem;
    }
    th, td {
      text-align: center; padding: 12px; width: 14.28%;
    }
    th { background: #ecf0f1; font-weight: 600; color: #2c3e50; }
    td {
      height: 60px; vertical-align: top; border: 1px solid #ddd;
      background: #fdfdfd; cursor: pointer; position: relative;
    }
    td.other-month { color: #bbb; background: #f8f9fa; }
    td.today {
      background: #fff3cd !important; font-weight: bold;
      box-shadow: inset 0 0 0 3px #f39c12;
    }
    td.has-event::after {
      content: "●"; color: #e74c3c; position: absolute;
      top: 5px; right: 7px; font-size: 12px;
    }

    /* Weekly View – 8 big slots */
    .weekly-view {
      background: white; border-radius: 15px; padding: 30px;
      box-shadow: 0 10px 30px rgba(0,0,0,0.1);
      margin-bottom: 40px;
    }
    .weekly-header {
      font-family: 'Playfair Display', serif;
      font-size: 2.5rem; text-align: center; color: #2c3e50;
      margin-bottom: 25px;
    }
    .week-grid {
      display: grid;
      grid-template-columns: 180px repeat(7, 1fr);
      gap: 15px;
    }
    .week-label {
      font-weight: 600; font-size: 1.1rem; padding: 15px 10px;
      background: #3498db; color: white; border-radius: 10px;
      text-align: center; writing-mode: vertical-rl; text-orientation: mixed;
    }
    .weekly-goals {
      grid-row: 1 / 2; grid-column: 1 / 9;
      background: linear-gradient(135deg, #ff9a9e 0%, #fad0c4 100%);
    }
    .day-slot {
      background: #f8f9fa; border-radius: 12px; padding: 15px;
      min-height: 320px; position: relative;
    }
    .day-slot h3 {
      margin: 0 0 15px; font-size: 1.4rem; color: #2c3e50;
      text-align: center; background: rgba(255,255,255,0.8);
      padding: 8px; border-radius: 8px;
    }
    textarea {
      width: 100%; min-height: 260px; border: none; background: transparent;
      font-family: 'Quicksand', sans-serif; font-size: 1rem; resize: none;
      padding: 10px; box-sizing: border-box;
    }
    textarea:focus { outline: 2px solid #3498db; border-radius: 8px; }

    /* Extra useful features */
    .extras {
      display: flex; flex-wrap: wrap; gap: 20px; justify-content: center;
      margin-top: 30px;
    }
    .extra-box {
      background: white; padding: 20px; border-radius: 15px;
      box-shadow: 0 8px 25px rgba(0,0,0,0.1); width: 300px;
    }
    .extra-box h3 { margin-top: 0; color: #e74c3c; }

    footer { text-align: center; margin-top: 50px; color: #777; font-size: 0.9rem; }
  </style>
</head>
<body>

  <h1>My Personal Planner</h1>
  <p class="subtitle">December 2025 – January 2027 • Everything saves automatically</p>

  <div class="container">

    <!-- Month Navigation -->
    <div class="month-nav">
      <button id="prevMonth">← Previous</button>
      <div class="month-title" id="currentMonthTitle"></div>
      <button id="nextMonth">Next →</button>
    </div>

    <!-- Mini Calendars (current + next month) -->
    <div class="calendars" id="calendarsContainer"></div>

    <!-- Weekly View (always shows the week containing "today") -->
    <div class="weekly-view">
      <div class="weekly-header" id="weekTitle"></div>
      <div class="week-grid" id="weekGrid"></div>
    </div>

    <!-- Extra useful boxes -->
    <div class="extras">
      <div class="extra-box">
        <h3>2026–2027 Big Goals</h3>
        <textarea id="bigGoals" placeholder="Write your major goals for the next 14 months…"></textarea>
      </div>
      <div class="extra-box">
        <h3>Habit Tracker Ideas</h3>
        <textarea id="habits" placeholder="e.g. Drink 2L water | Meditate 10 min | No phone after 22:00"></textarea>
      </div>
      <div class="extra-box">
        <h3>Gratitude / Wins</h3>
        <textarea id="gratitude" placeholder="What went well this week?"></textarea>
      </div>
    </div>

  </div>

  <footer>Made with ♥ for you • All data stays in your browser • 2025–2027</footer>

<script>
const { DateTime } = luxon;

let currentMonth = DateTime.now();

// Load saved data
function loadData() {
  const data = JSON.parse(localStorage.getItem('planner2025')) || {};
  return {
    weeklyNotes: data.weeklyNotes || {},
    bigGoals: data.bigGoals || '',
    habits: data.habits || '',
    gratitude: data.gratitude || ''
  };
}

// Save everything
function saveAll() {
  const data = {
    weeklyNotes: {},
    bigGoals: document.getElementById('bigGoals').value,
    habits: document.getElementById('habits').value,
    gratitude: document.getElementById('gratitude').value
  };

  document.querySelectorAll('.day-textarea').forEach(textarea => {
    const key = textarea.dataset.date;
    data.weeklyNotes[key] = textarea.value;
  });

  localStorage.setItem('planner2025', JSON.stringify(data));
}

// Render two mini calendars
function renderCalendars() {
  const container = document.getElementById('calendarsContainer');
  container.innerHTML = '';

  [currentMonth, currentMonth.plus({ months: 1 })].forEach((month, idx) => {
    const div = document.createElement('div');
    div.className = 'mini-calendar';
    div.innerHTML = `<h2>${month.toFormat('MMMM yyyy')}</h2>`;
    const table = document.createElement('table');
    const thead = document.createElement('thead');
    const tr = document.createElement('tr');
    ['Sun','Mon','Tue','Wed','Thu','Fri','Sat'].forEach(day => {
      const th = document.createElement('th');
      th.textContent = day;
      tr.appendChild(th);
    });
    thead.appendChild(tr);
    table.appendChild(thead);

    const tbody = document.createElement('tbody');
    const first = month.startOf('month').startOf('week');
    const last = month.endOf('month').endOf('week');

    let date = first;
    while (date <= last) {
      const row = document.createElement('tr');
      for (let i = 0; i < 7; i++) {
        const td = document.createElement('td');
        if (date.month === month.month) {
          td.textContent = date.day;
          td.dataset.date = date.toISODate();

          if (date.hasSame(DateTime.now(), 'day')) td.classList.add('today');

          // Mark days that have notes
          const saved = loadData().weeklyNotes[date.toISODate()];
          if (saved && saved.trim()) td.classList.add('has-event');
        } else {
          td.classList.add('other-month');
        }
        row.appendChild(td);
        date = date.plus({ days: 1 });
      }
      tbody.appendChild(row);
    }
    table.appendChild(tbody);
    div.appendChild(table);
    container.appendChild(div);
  });

  document.getElementById('currentMonthTitle').textContent =
    currentMonth.toFormat('MMMM yyyy');
}

// Render the 8-slot weekly view for the week containing "today"
function renderWeek() {
  const today = DateTime.now();
  const startOfWeek = today.startOf('week'); // Monday? luxon default is Monday in some locales, but we force Sunday start below

  const weekStart = today.startOf('week', { useLocaleWeek: false }); // Sunday start
  const dates = [];
  for (let i = 0; i < 7; i++) {
    dates.push(weekStart.plus({ days: i }));
  }

  document.getElementById('weekTitle').textContent =
    `${weekStart.toFormat('d MMM')} – ${weekStart.plus({days:6}).toFormat('d MMM yyyy')} • Week ${weekStart.weekNumber}`;

  const grid = document.getElementById('weekGrid');
  grid.innerHTML = `
    <div class="week-label weekly-goals"><div style="writing-mode: horizontal-tb;">Weekly Goals & Priorities</div></div>
    ${dates.map((d, i) => `
      <div class="day-slot">
        <h3>${d.toFormat('EEEE')}<br><span style="font-size:1rem;color:#777;">${d.toFormat('d MMM')}</span></h3>
        <textarea class="day-textarea" data-date="${d.toISODate()}" placeholder="Free-form notes, tasks, events… (no time blocks)"></textarea>
      </div>
    `).join('')}
  `;

  // Weekly goals textarea (always first slot)
  const goalsSlot = grid.querySelector('.weekly-goals');
  const goalsTextarea = document.createElement('textarea');
  goalsTextarea.placeholder = "Top 3–5 priorities this week…";
  goalsTextarea.id = "weeklyGoalsText";
  goalsSlot.appendChild(goalsTextarea);

  // Load saved content
  const saved = loadData();
  document.querySelectorAll('.day-textarea').forEach(ta => {
    ta.value = saved.weeklyNotes[ta.dataset.date] || '';
    ta.addEventListener('input', saveAll);
  });
  goalsTextarea.value = saved.weeklyNotes['weekly-goals'] || '';
  goalsTextarea.addEventListener('input', () => {
    saved.weeklyNotes['weekly-goals'] = goalsTextarea.value;
    localStorage.setItem('planner2025', JSON.stringify(saved));
  });

  document.getElementById('bigGoals').value = saved.bigGoals;
  document.getElementById('habits').value = saved.habits;
  document.getElementById('gratitude').value = saved.gratitude;
}

// Navigation
document.getElementById('prevMonth').onclick = () => {
  currentMonth = currentMonth.minus({ months: 1 });
  renderCalendars();
};
document.getElementById('nextMonth').onclick = () => {
  currentMonth = currentMonth.plus({ months: 1 });
  renderCalendars();
};

// Autosave on any change in extra boxes
document.getElementById('bigGoals').addEventListener('input', saveAll);
document.getElementById('habits').addEventListener('input', saveAll);
document.getElementById('gratitude').addEventListener('input', saveAll);

// Initial render
renderCalendars();
renderWeek();
</script>
</body>
</html>
